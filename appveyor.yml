image: Visual Studio 2015

before_build:
- set PATH=%PATH%;C:\MinGW\msys\1.0\bin;C:\MinGW\bin
- git clone -q https://github.com/WolfgangSt/libelf.git C:/libelf
- cd C:/libelf
- echo ./configure --host i686-pc-mingw32; make > script.sh
- sh --login .\script.sh

build_script:
- dir C:\Libraries\boost\
- echo cd /c/projects/mipt-mips/simulator/; make LIBELF_INCL=/c/libelf/lib LIBELF_LPATH=/c/libelf/lib BOOST_INCL=/c/Libraries/boost BOOST_LPATH=/c/Libraries/boost/stage/lib mipt-mips disasm test > script.sh
- sh --login .\script.sh

environment:
  matrix:
  - Compiler: mingw
    Build: static
